{% extends "question.html" %}

    <!--
    <style>
        div p { text-align: center}
        .block {border: 2px solid grey; overflow: hidden;}
        .column { width: 230px; float: left; background: lightgrey; margin: 5px;}
        .questioncontent {overflow: hidden; margin: 5px; white-space: pre-line;}
        .imgblock {width: 150px; height: auto; display: block; margin-left: auto; margin-right: auto; padding: 15px;}

        .message {margin-bottom: 15px; border: 1px solid black;}
        .image {float:left; margin-right: 10px;}
        .user {float:left; font-weight:bold; color:#009; margin-bottom: 5px; margin-left: 5px; }
        .content { margin-left: 30px;font-style:italic; color:#; }
        .date { padding-left: 15px; padding-right: 15px; float: left;}
        .votes { float: right; padding-rigt: 15px;}
        .button { float: right; padding-right: 20px; padding-left: 25px}
        .head {background: lightgrey; width: fit-content}
        .delbtn, .editbtn, .combtn {float:right; padding-right: 5px;}
        .comments {margin-top: 30px; margin-left: 30px; margin-right:30px; margin-bottom: 5px; color: black;}



    </style> -->


{% block answer %}
    <div class="answerblock">
        <div class="block">
            <div class="column">
                <a href='/answer/{{ answer["id"] }}/vote_up'><img src="/static/images/upvote.png" height="20" width="20"></a>
                <p>{{ answer["vote_number"] }}</p>
                <a href='/answer/{{ answer["id"] }}/vote_down'><img src="/static/images/downvote.png" height="20" width="20"></a>
            </div>
            <div style="clear:both;"></div>

            <div class="content">
                <div class="msg">
                    {{ answer["message"] }}
                    {% if answer['image'] %}
                    <div class="image"><img src="{{ url_for('static', filename=('images/' + answer['image'])) }}" width="100" height="100"></div>
                    {% endif %}
                </div>
                <div class="navbar">
                    <span>{{ answer['user_name'] }}</span>
                    <span class="date">Posted: {{ answer["submission_time"] }}</span>
                    {% if not addinganswer and session['user'] == answer['user_name'] %}
                        <a href="{{ url_for('edit_answer', answer_id = answer['id']) }}">Edit</a>
                        <a href="{{ url_for('delete_answer', question_id=question["id"],  answer_id=answer['id']) }}">Delete</a>
                        <a href="{{ url_for('write_new_comment', question_id=question['id'], answer_id=answer['id']) }}">Comment</a>
                    {% elif not addinganswer and session['user']%}
                        <a href="{{ url_for('write_new_comment', question_id=question['id'], answer_id=answer['id']) }}">Comment</a>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="comments">
            {% for comment in comments %}
                {% if comment["answer_id"] == answer["id"] %}
                    <div class="content">
                        <div class="msg">{{ comment["message"] }}</div>
                        <div class="navbar">
                            <span>username</span>
                            <span>{{ comment["submission_time"] }}</span>
                            {% if comment["edited_count"] == 1 %}
                                <span>(Edited {{ comment["edited_count"] }} time.)</span>
                            {% elif comment["edited_count"] != 0 %}
                                <span>(Edited {{ comment["edited_count"] }} times.)</span>
                            {% endif %}
                            {% if not addinganswer and session['user'] == comment['user_name'] %}
                                <a href="{{ url_for('edit_comment', comment_id=comment['id']) }}">Edit</a>
                                <a href="{{ url_for('delete_comment', question_id=question_id, comment_id=comment['id']) }}"
                                   onclick="return confirm('Are you sure, you want to delete this comment?')">
                                    <img src="/static/images/recyclebin.jpg" height="20" width="20">
                                </a>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

    </div>
{% endblock %}

{% block givinganswer %}
    <h2>Add new answer</h2>
    <div class="block">
        <pre>
        <form action="/question/{{ question['id'] }}/new-answer" method="POST" enctype="multipart/form-data">
            <label title="answer">Answer:</label>
            <textarea title="answer" name="message" rows="8" cols="50" required></textarea>

            <label for="image" title="add-image">Image:</label>
            <input type="file" title="image" name="image" id="image" accept=".jpg,.png"/>
            <br><br>

            <button type="submit" title="submit_answer">Answer</button>
        </form>
        </pre>
    </div>
{% endblock %}
